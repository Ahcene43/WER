// config.js - ملف إعدادات المتجر
const STORE_CONFIG = {
  "PRODUCTS": {
    "19": {
      "id": "19",
      "name": "مودال 1",
      "price": 8400,
      "image": "https://raw.githubusercontent.com/Dz-Store/WER/main/images/product-19-1761774285629-modal7.jpg.webp",
      "description": "فستان سندريلا بتصميم أنيق يناسب المناسبات الخاصة",
      "availableSizes": ["M", "S2"],
      "availableColors": ["كما في الصورة"],
      "category": "فساتين",
      "inStock": true
    },
    "20": {
      "id": "20",
      "name": "مودال 2",
      "price": 6000,
      "image": "https://raw.githubusercontent.com/Dz-Store/WER/main/images/product-20-1761816208064-modle6.jpg",
      "description": "مودال عصري بتصميم مريح وأنيق للأطفال",
      "availableSizes": ["S1", "S2", "M"],
      "availableColors": ["كما في الصورة"],
      "category": "ملابس أطفال",
      "inStock": true
    },
    "21": {
      "id": "21",
      "name": "مودال 3",
      "price": 4000,
      "image": "https://raw.githubusercontent.com/Dz-Store/WER/main/images/product-21-1761838155562-modal5.jpg",
      "description": "مودال تركي بتفصيلات عصرية وجودة عالية",
      "availableSizes": ["S1", "S2", "M", "L"],
      "availableColors": ["كما في الصورة"],
      "category": "ملابس أطفال",
      "inStock": true
    }
  },

  "DELIVERY_PRICES": {
    "01 - أدرار": { "home": 1100, "desk": 600 },
    "02 - الشلف": { "home": 700, "desk": 400 },
    "03 - الأغواط": { "home": 1000, "desk": 600 },
    "04 - أم البواقي": { "home": 650, "desk": 400 },
    "05 - باتنة": { "home": 700, "desk": 400 },
    "06 - بجاية": { "home": 700, "desk": 400 },
    "07 - بسكرة": { "home": 900, "desk": 500 },
    "08 - بشار": { "home": 1100, "desk": 600 },
    "09 - البليدة": { "home": 500, "desk": 250 },
    "10 - البويرة": { "home": 700, "desk": 400 },
    "11 - تمنراست": { "home": 1300, "desk": 800 },
    "12 - تبسة": { "home": 700, "desk": 400 },
    "13 - تلمسان": { "home": 800, "desk": 400 },
    "14 - تيارت": { "home": 800, "desk": 400 },
    "15 - تيزي وزو": { "home": 700, "desk": 400 },
    "16 - الجزائر": { "home": 500, "desk": 250 },
    "17 - الجلفة": { "home": 900, "desk": 500 },
    "18 - جيجل": { "home": 700, "desk": 400 },
    "19 - سطيف": { "home": 700, "desk": 400 },
    "20 - سعيدة": { "home": 800, "desk": 400 },
    "21 - سكيكدة": { "home": 600, "desk": 400 },
    "22 - سيدي بلعباس": { "home": 700, "desk": 400 },
    "23 - عنابة": { "home": 700, "desk": 400 },
    "24 - قالمة": { "home": 600, "desk": 400 },
    "25 - قسنطينة": { "home": 600, "desk": 400 },
    "26 - المدية": { "home": 700, "desk": 400 },
    "27 - مستغانم": { "home": 700, "desk": 400 },
    "28 - المسيلة": { "home": 800, "desk": 400 },
    "29 - معسكر": { "home": 700, "desk": 400 },
    "30 - ورقلة": { "home": 900, "desk": 500 },
    "31 - وهران": { "home": 800, "desk": 400 },
    "32 - البيض": { "home": 800, "desk": 500 },
    "33 - إليزي": { "home": 1300, "desk": 600 },
    "34 - برج بوعريريج": { "home": 700, "desk": 400 },
    "35 - بومرداس": { "home": 700, "desk": 400 },
    "36 - الطارف": { "home": 700, "desk": 400 },
    "37 - تندوف": { "home": 1300, "desk": 600 },
    "38 - تيسمسيلت": { "home": 800, "desk": 400 },
    "39 - الوادي": { "home": 900, "desk": 500 },
    "40 - خنشلة": { "home": 700, "desk": 500 },
    "41 - سوق أهراس": { "home": 700, "desk": 400 },
    "42 - تيبازة": { "home": 700, "desk": 400 },
    "43 - ميلة": { "home": 700, "desk": 450 },
    "44 - عين الدفلى": { "home": 700, "desk": 400 },
    "45 - النعامة": { "home": 800, "desk": 500 },
    "46 - عين تموشنت": { "home": 800, "desk": 400 },
    "47 - غرداية": { "home": 900, "desk": 500 },
    "48 - غليزان": { "home": 700, "desk": 400 },
    "49 - تيميمون": { "home": 1100, "desk": 600 },
    "50 - برج باجي مختار": { "home": 1200, "desk": 650 },
    "51 - أولاد جلال": { "home": 900, "desk": 500 },
    "52 - بني عباس": { "home": 1100, "desk": 600 },
    "53 - عين صالح": { "home": 1300, "desk": 700 },
    "54 - عين قزام": { "home": 1300, "desk": 700 },
    "55 - توقرت": { "home": 950, "desk": 550 },
    "56 - جانت": { "home": 1100, "desk": 500 },
    "57 - المغير": { "home": 950, "desk": 550 },
    "58 - المنيعة": { "home": 1000, "desk": 400 }
  },

  "DISCOUNTS": {
    "minQuantityForDiscount": 2,
    "discountPerItem": 400,
    "discountProducts": ["20", "21"],
    "discountScope": "selected"
  },

  "STORE_INFO": {
    "name": "BENAKRAB-Shopp",
    "tagline": "متجر أفخم الملابس",
    "phoneNumbers": ["0671466489", "0792946548"],
    "storeIcon": "👗🛍️",
    "storeTitle": "أحدث موديلات الأطفال",
    "whatsappNumber": "213671466489",
    "email": "contact@benakrab.com",
    "address": "الجزائر",
    "socialMedia": {
      "facebook": "https://facebook.com/benakrab",
      "instagram": "https://instagram.com/benakrab"
    }
  },

  "AGE_SIZES": {
    "6": "S1",
    "7": "S2",
    "8": "M",
    "9": "L",
    "10": "XL",
    "11": "XXL",
    "12": "S4"
  },

  "AVAILABLE_COLORS": [
    "كما في الصورة",
    "أبيض",
    "أسود",
    "رمادي",
    "أزرق",
    "أحمر",
    "أخضر",
    "زهري",
    "بنفسجي"
  ],

  "AVAILABLE_SIZES": [
    "S1",
    "S2",
    "M",
    "L",
    "XL",
    "XXL"
  ],

  "PAYMENT_METHODS": {
    "cashOnDelivery": true,
    "bankTransfer": true,
    "onlinePayment": false
  },

  "RETURN_POLICY": {
    "allowed": true,
    "days": 7,
    "conditions": "يجب أن يكون المنتج بحالته الأصلية مع الاحتفاظ بالعلامات"
  },

  // دوال مساعدة
  "UTILS": {
    // حساب السعر بعد الخصم
    calculateDiscountedPrice: function(productId, quantity) {
      const product = STORE_CONFIG.PRODUCTS[productId];
      if (!product) return 0;

      let totalPrice = product.price * quantity;
      
      // تطبيق الخصم إذا كان المنتج مؤهلاً
      if (STORE_CONFIG.DISCOUNTS.discountProducts.includes(productId) && 
          quantity >= STORE_CONFIG.DISCOUNTS.minQuantityForDiscount) {
        const discount = STORE_CONFIG.DISCOUNTS.discountPerItem * quantity;
        totalPrice -= discount;
      }
      
      return totalPrice;
    },

    // الحصول على سعر التوصيل
    getDeliveryPrice: function(wilaya, deliveryType) {
      const prices = STORE_CONFIG.DELIVERY_PRICES[wilaya];
      return prices ? prices[deliveryType] || 0 : 0;
    },

    // التحقق من توفر المنتج
    isProductAvailable: function(productId, size, color) {
      const product = STORE_CONFIG.PRODUCTS[productId];
      if (!product || !product.inStock) return false;
      
      const sizeAvailable = product.availableSizes.includes(size);
      const colorAvailable = product.availableColors.includes(color);
      
      return sizeAvailable && colorAvailable;
    },

    // الحصول على حجم حسب العمر
    getSizeByAge: function(age) {
      return STORE_CONFIG.AGE_SIZES[age] || 'M';
    },

    // تنسيق السعر
    formatPrice: function(price) {
      return new Intl.NumberFormat('ar-DZ', {
        style: 'currency',
        currency: 'DZD'
      }).format(price);
    },

    // إنشاء رابط واتساب للطلب
    createWhatsAppOrderLink: function(orderDetails) {
      const phone = STORE_CONFIG.STORE_INFO.whatsappNumber;
      let message = `مرحباً، أريد طلب المنتجات التالية:\n\n`;
      
      orderDetails.products.forEach(product => {
        message += `- ${product.name} (${product.size}, ${product.color}) × ${product.quantity}\n`;
      });
      
      message += `\nالمجموع: ${orderDetails.total} دج`;
      message += `\nالتوصيل: ${orderDetails.delivery} دج`;
      message += `\nالإجمالي: ${orderDetails.finalTotal} دج`;
      message += `\n\nالاسم: ${orderDetails.customerName}`;
      message += `\nالعنوان: ${orderDetails.address}`;
      message += `\nالولاية: ${orderDetails.wilaya}`;
      
      return `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
    }
  }
};

// جعل الكائن متاحاً globally للاستخدام في الملفات الأخرى
if (typeof window !== 'undefined') {
  window.STORE_CONFIG = STORE_CONFIG;
}
